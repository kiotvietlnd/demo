<!DOCTYPE html><html lang="vi" class="scroll-smooth"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Game KiotViet Retail</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; touch-action: manipulation; }
        .soft-glow-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -10; background: linear-gradient(to bottom right, #f8fafc, #e0f2fe); }
        .kv-blue { color: #166def; } .bg-kv-blue { background-color: #166def; }
        .main-card { background-color: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(203, 213, 225, 0.5); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .fade-in { animation: fadeIn 0.5s ease-in-out; } @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .mode-btn { transition: all 0.2s ease; } .mode-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); background-color: #f3f4f6; border-color: #166def;}
        .mode-btn-selected { background-color: #e0f2fe !important; border-color: #166def !important; color: #0a58ca !important; }
        .correct { background-color: #10B981 !important; color: white !important; border-color: #059669 !important; }
        .incorrect { background-color: #EF4444 !important; color: white !important; border-color: #DC2626 !important; }
        .btn { font-weight: bold; padding: 0.75rem 2rem; border-radius: 0.5rem; text-align: center; transition: all 0.2s; cursor: pointer; }
        .btn-blue { background-color: #166def; color: white; } .btn-blue:hover { background-color: #0a58ca; }
        .btn-green { background-color: #16a34a; color: white; } .btn-green:hover { background-color: #15803d; }
        .btn-slate { background-color: #475569; color: white; } .btn-slate:hover { background-color: #334155; }
    </style></head><body class="text-slate-700 antialiased flex items-center justify-center min-h-screen p-4">
    <div class="soft-glow-background"></div>
    
    <main class="w-full max-w-2xl">
        <div id="start-screen" class="main-card rounded-2xl p-6 sm:p-8 lg:p-10 fade-in"></div>
        <div id="mode-screen" class="main-card rounded-2xl p-6 sm:p-8 lg:p-10 hidden fade-in"></div>
        <div id="result-area" class="main-card rounded-2xl p-6 sm:p-8 lg:p-10 hidden text-center fade-in"></div>
        <div id="review-screen" class="main-card rounded-2xl p-6 sm:p-8 lg:p-10 hidden fade-in w-full max-w-3xl"></div>
    </main>

    <div id="quiz-container" class="hidden fixed inset-0 z-40 flex flex-col md:flex-row bg-slate-50 fade-in"></div>
    <div id="certificate-screen" class="hidden fixed inset-0 bg-slate-900/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 fade-in"></div>
    
    <script>
    const quizDataForClient = [{"id":"dao-tao-kiotviet-mobile-1","topic":"Đào tạo KiotViet Mobile","question":"Trên app KiotViet, khi thêm mới hàng hóa, tính năng nào giúp hệ thống tự động điền mã vạch nhanh chóng thay vì phải nhập tay?","answers":[{"id":"dao-tao-kiotviet-mobile-1-a","text":"Nhấn vào ô Mã hàng và nhập các con số từ bàn phím ảo.","feedback":"Đây là đáp án SAI. Đây là thao tác nhập thủ công, không tận dụng được tính năng tự động hóa của camera như đề bài yêu cầu."},{"id":"dao-tao-kiotviet-mobile-1-b","text":"Chạm vào biểu tượng Barcode (mã vạch) cạnh ô mã hàng để quét bằng camera.","feedback":"Đây là đáp án ĐÚNG. Biểu tượng Barcode kích hoạt camera để quét mã vạch thực tế, giúp hệ thống nhận diện và điền mã ngay lập tức."},{"id":"dao-tao-kiotviet-mobile-1-c","text":"Chụp ảnh sản phẩm và lưu vào mục hình ảnh đại diện.","feedback":"Đây là đáp án SAI. Việc chụp ảnh đại diện chỉ để hiển thị hình ảnh sản phẩm, không có tác dụng đọc mã vạch để điền dữ liệu."}]},{"id":"dao-tao-kiotviet-mobile-2","topic":"Đào tạo KiotViet Mobile","question":"Trên app KiotViet, để quản lý một sản phẩm có nhiều phiên bản khác nhau (như màu sắc xanh/đỏ, size S/M/L), bạn bắt buộc phải sử dụng tính năng nào?","answers":[{"id":"dao-tao-kiotviet-mobile-2-a","text":"Tính năng \"Thêm đơn vị tính\".","feedback":"Đây là đáp án SAI. \"Thêm đơn vị tính\" dùng để quy đổi đơn vị (ví dụ: cái -> hộp -> thùng), không dùng để phân loại màu sắc/kích cỡ."},{"id":"dao-tao-kiotviet-mobile-2-b","text":"Tính năng \"Thêm thuộc tính\".","feedback":"Đây là đáp án ĐÚNG. \"Thêm thuộc tính\" là chức năng chuyên dụng để tạo và quản lý các biến thể của cùng một sản phẩm gốc."},{"id":"dao-tao-kiotviet-mobile-2-c","text":"Tính năng \"Tạo hàng hóa mới\" cho từng phiên bản.","feedback":"Đây là đáp án SAI. Việc tạo nhiều mã hàng rời rạc là cách làm thủ công, gây khó khăn trong quản lý tồn kho tổng hợp và không đúng chuẩn phần mềm."}]},{"id":"dao-tao-kiotviet-mobile-3","topic":"Đào tạo KiotViet Mobile","question":"Trên app KiotViet, quy trình bán hàng được coi là hoàn tất (trừ kho và ghi nhận doanh thu) ngay sau khi người dùng thực hiện thao tác nào?","answers":[{"id":"dao-tao-kiotviet-mobile-3-a","text":"Nhấn nút \"Thanh toán\", kiểm tra thông tin và nhấn nút \"Hoàn thành\".","feedback":"Đây là đáp án ĐÚNG. Nút \"Hoàn thành\" là bước xác nhận cuối cùng để chốt giao dịch, hệ thống lúc này mới chính thức trừ tồn kho."},{"id":"dao-tao-kiotviet-mobile-3-b","text":"Chỉ cần chọn xong sản phẩm và nhấn nút \"Lưu tạm\".","feedback":"Đây là đáp án SAI. \"Lưu tạm\" chỉ giữ lại đơn hàng để xử lý sau, chưa trừ kho và chưa tính vào doanh thu thực tế."},{"id":"dao-tao-kiotviet-mobile-3-c","text":"Nhấn nút \"In hóa đơn\" ngay tại màn hình chọn sản phẩm.","feedback":"Đây là đáp án SAI. Người dùng không thể in hóa đơn khi chưa qua bước Thanh toán; hơn nữa hành động in không đồng nghĩa với việc chốt đơn trên hệ thống."}]},{"id":"dao-tao-kiotviet-mobile-4","topic":"Đào tạo KiotViet Mobile","question":"Trên app KiotViet, để thực hiện trả hàng đúng quy trình từ một giao dịch cũ, bạn cần thao tác vào đâu tại màn hình chi tiết hóa đơn?","answers":[{"id":"dao-tao-kiotviet-mobile-4-a","text":"Nhấn vào nút \"Xóa\" ở dưới cùng màn hình.","feedback":"Đây là đáp án SAI. Nút \"Xóa\" (nếu có và được phân quyền) sẽ hủy bỏ hoàn toàn hóa đơn, không phải là quy trình trả hàng (trả lại một phần hoặc toàn bộ) chuẩn."},{"id":"dao-tao-kiotviet-mobile-4-b","text":"Nhấn giữ vào tên khách hàng để hiện menu phụ.","feedback":"Đây là đáp án SAI. Thao tác nhấn giữ tên khách hàng thường để xem thông tin liên hệ, không liên quan đến nghiệp vụ trả hàng."},{"id":"dao-tao-kiotviet-mobile-4-c","text":"Chạm vào biểu tượng ba chấm ở góc màn hình và chọn \"Trả hàng\".","feedback":"Đây là đáp án ĐÚNG. Chức năng Trả hàng được thiết kế nằm trong menu mở rộng (biểu tượng ba chấm) của hóa đơn gốc."}]},{"id":"dao-tao-kiotviet-mobile-5","topic":"Đào tạo KiotViet Mobile","question":"Trên app KiotViet, đâu là thao tác chuẩn để ghi nhận khoản tiền đã trả cho Nhà cung cấp (thanh toán công nợ)?","answers":[{"id":"dao-tao-kiotviet-mobile-5-a","text":"Vào Sổ quỹ, chọn \"Lập phiếu chi\" và tự điền tên nhà cung cấp.","feedback":"Đây là đáp án SAI. Mặc dù về mặt dòng tiền là đúng, nhưng quy trình chuẩn trên App hướng dẫn người dùng đi từ đối tượng (Nhà cung cấp) để hệ thống tự link chứng từ chính xác nhất."},{"id":"dao-tao-kiotviet-mobile-5-b","text":"Vào chi tiết Nhà cung cấp, chọn tab \"Công nợ\" rồi nhấn \"Thanh toán\".","feedback":"Đây là đáp án ĐÚNG. Đây là quy trình được khuyến nghị để đảm bảo khoản chi được cấn trừ trực tiếp và chính xác vào công nợ của nhà cung cấp đó."},{"id":"dao-tao-kiotviet-mobile-5-c","text":"Vào màn hình Nhập hàng, tạo một phiếu nhập mới với giá trị âm.","feedback":"Đây là đáp án SAI. Phiếu nhập giá trị âm là thao tác sai lệch bản chất nghiệp vụ (trả hàng), không phải là thao tác thanh toán tiền nợ."}]},{"id":"thiet-lap-kv804-1","topic":"Thiết lập KV804","question":"Khi thay giấy cho máy in hóa đơn KV804, thao tác nào sau đây là bắt buộc để đảm bảo máy in ra nội dung (có mực)?","answers":[{"id":"thiet-lap-kv804-1-a","text":"Đặt cuộn giấy sao cho mặt giấy in hướng xuống dưới (úp xuống).","feedback":"Đây là đáp án SAI. Nếu đặt mặt giấy úp xuống, đầu in nhiệt sẽ tiếp xúc với mặt lưng của giấy (không có hóa chất cảm nhiệt), dẫn đến việc máy chạy nhưng giấy in ra trắng tinh."},{"id":"thiet-lap-kv804-1-b","text":"Đặt cuộn giấy sao cho mặt giấy in hướng lên trên (ngửa lên).","feedback":"Đây là đáp án ĐÚNG. Máy in nhiệt chỉ tác động nhiệt lên một mặt giấy; do đó mặt cảm nhiệt phải hướng lên trên để tiếp xúc trực tiếp với đầu in."},{"id":"thiet-lap-kv804-1-c","text":"Bóc bỏ lớp vỏ nhựa của trục cuốn giấy trước khi lắp.","feedback":"Đây là đáp án SAI. Trục cuốn giấy đi kèm thường là lõi nhựa cứng hoặc không cần trục (thả trực tiếp), việc bóc vỏ nhựa trục không phải là thao tác liên quan đến chiều giấy."}]},{"id":"thiet-lap-kv804-2","topic":"Thiết lập KV804","question":"Để khắc phục triệt để tình trạng hóa đơn in ra bị lệch lề hoặc thừa quá nhiều giấy trắng, bạn cần thiết lập gì trong cửa sổ xem trước (Preview)?","answers":[{"id":"thiet-lap-kv804-2-a","text":"Thiết lập Lề (Margins) là \"Mặc định\" (Default).","feedback":"Đây là đáp án SAI. Chế độ Mặc định của trình duyệt thường chừa lề khoảng 1-2cm mỗi bên, khiến nội dung hóa đơn khổ 80mm bị bóp nghẹt hoặc đẩy lệch sang trang sau."},{"id":"thiet-lap-kv804-2-b","text":"Thiết lập Khổ giấy (Paper size) sang A4.","feedback":"Đây là đáp án SAI. Máy in hóa đơn sử dụng khổ giấy K80 (80mm), nếu chọn khổ A4 bản in sẽ bị sai tỉ lệ hoàn toàn."},{"id":"thiet-lap-kv804-2-c","text":"Thiết lập Lề (Margins) là \"Không\" (None) và bỏ chọn \"Đầu trang và chân trang\".","feedback":"Đây là đáp án ĐÚNG. Việc bỏ lề (None) giúp nội dung in tràn sát mép giấy đúng chuẩn hóa đơn, và tắt Header/Footer giúp loại bỏ các dòng link web thừa ở đầu/cuối giấy."}]},{"id":"thiet-lap-kv804-3","topic":"Thiết lập KV804","question":"Dòng máy in KiotViet KV804 được trang bị các cổng kết nối nào để phục vụ linh hoạt cho cửa hàng?","answers":[{"id":"thiet-lap-kv804-3-a","text":"Chỉ có cổng USB duy nhất để kết nối máy tính.","feedback":"Đây là đáp án SAI. KV804 là dòng máy đa năng, không chỉ giới hạn ở cổng USB."},{"id":"thiet-lap-kv804-3-b","text":"Chỉ có cổng Bluetooth để kết nối điện thoại.","feedback":"Đây là đáp án SAI. KV804 phiên bản tiêu chuẩn sử dụng kết nối LAN (Wifi) cho thiết bị di động, không sử dụng sóng Bluetooth."},{"id":"thiet-lap-kv804-3-c","text":"Hỗ trợ cả 2 cổng: USB (cho máy tính, máy POS) và LAN (cho in mạng từ máy tính, máy POS, điện thoại).","feedback":"Đây là đáp án ĐÚNG. Thiết kế này cho phép máy vừa cắm trực tiếp vào máy thu ngân (ổn định cao), vừa chia sẻ được cho các thiết bị khác in qua mạng."}]},{"id":"thiet-lap-kv804-4","topic":"Thiết lập KV804","question":"Khi kết nối máy in KV804 với ngăn kéo đựng tiền qua cổng RJ11, ngăn kéo sẽ hoạt động theo cơ chế nào?","answers":[{"id":"thiet-lap-kv804-4-a","text":"Ngăn kéo tự động bật mở ngay khi lệnh in hóa đơn được thực hiện thành công.","feedback":"Đây là đáp án ĐÚNG. Máy in gửi tín hiệu xung điện qua cổng RJ11 kèm theo lệnh in, kích hoạt chốt khóa của ngăn kéo để bật ra ngay lập tức."},{"id":"thiet-lap-kv804-4-b","text":"Ngăn kéo chỉ mở khi người dùng nhấn nút bấm vật lý trên máy in.","feedback":"Đây là đáp án SAI. Máy in không có nút bấm vật lý riêng biệt chỉ để mở két; thao tác phải xuất phát từ lệnh phần mềm."},{"id":"thiet-lap-kv804-4-c","text":"Ngăn kéo sẽ tự động mở định kỳ 30 phút một lần để kiểm tra.","feedback":"Đây là đáp án SAI. Cơ chế này không tồn tại và gây mất an toàn nghiêm trọng cho tiền mặt."}]},{"id":"thiet-lap-kv804-5","topic":"Thiết lập KV804","question":"Điều kiện hạ tầng mạng bắt buộc để in hóa đơn từ App KiotViet trên điện thoại ra máy in KV804 là gì?","answers":[{"id":"thiet-lap-kv804-5-a","text":"Điện thoại phải bật Bluetooth và đứng cách máy in không quá 2 mét.","feedback":"Đây là đáp án SAI. Đây là điều kiện của máy in Bluetooth. KV804 in qua giao thức mạng TCP/IP nên không phụ thuộc vào khoảng cách 2m hay sóng Bluetooth."},{"id":"thiet-lap-kv804-5-b","text":"Máy in phải cắm dây mạng (LAN) và điện thoại phải bắt cùng mạng WiFi với máy in.","feedback":"Đây là đáp án ĐÚNG. Để App điện thoại \"nhìn thấy\" máy in, cả hai thiết bị phải cùng nằm trong một dải mạng nội bộ (Local Area Network)."},{"id":"thiet-lap-kv804-5-c","text":"Điện thoại phải sử dụng 4G để kết nối internet độc lập.","feedback":"Đây là đáp án SAI. Nếu dùng 4G, điện thoại sẽ nằm ở lớp mạng khác và không thể gửi lệnh in tới địa chỉ IP nội bộ của máy in."}]},{"id":"cai-dat-pos-d68-1","topic":"Cài đặt POS D68","question":"Để kết nối Internet cho máy POS D68, người dùng có thể sử dụng các phương thức nào sau đây?","answers":[{"id":"cai-dat-pos-d68-1-a","text":"Cắm dây mạng LAN vào cổng RJ45 hoặc kết nối Wifi qua bảng cài đặt nhanh.","feedback":"Đây là đáp án ĐÚNG. Máy POS D68 hỗ trợ linh hoạt cả hai chuẩn kết nối phổ biến là mạng dây (qua cổng RJ45 phía sau) và mạng không dây (Wifi)."},{"id":"cai-dat-pos-d68-1-b","text":"Chỉ có thể kết nối qua Wifi, thiết bị này không hỗ trợ mạng dây LAN.","feedback":"Đây là đáp án SAI. Máy POS D68 có tích hợp sẵn cổng mạng LAN (RJ45) ở mặt sau, không chỉ giới hạn ở Wifi."},{"id":"cai-dat-pos-d68-1-c","text":"Phải sử dụng USB 3G/4G cắm ngoài để kết nối mạng.","feedback":"Đây là đáp án SAI. Thiết bị hỗ trợ kết nối trực tiếp qua LAN hoặc Wifi, không yêu cầu thiết bị USB 3G/4G ngoại vi để vào mạng."}]},{"id":"cai-dat-pos-d68-2","topic":"Cài đặt POS D68","question":"Để thực hiện bán hàng trên máy POS D68, bạn cần tìm và cài đặt chính xác ứng dụng nào trên kho ứng dụng Play?","answers":[{"id":"cai-dat-pos-d68-2-a","text":"Ứng dụng \"KiotViet máy bán hàng\".","feedback":"Đây là đáp án ĐÚNG. Đây là ứng dụng chuyên biệt dành cho thu ngân để thực hiện các thao tác bán hàng, in hóa đơn trên thiết bị POS."},{"id":"cai-dat-pos-d68-2-b","text":"Ứng dụng \"KiotViet Quản lý\".","feedback":"Đây là đáp án SAI. Ứng dụng \"Quản lý\" dùng cho chủ cửa hàng để xem báo cáo và quản lý từ xa, không tối ưu cho thao tác bán hàng tại quầy POS."},{"id":"cai-dat-pos-d68-2-c","text":"Ứng dụng \"KiotViet POS Driver\".","feedback":"Đây là đáp án SAI. Không có ứng dụng tên là \"POS Driver\" trên kho ứng dụng. Việc cài đặt driver là không cần thiết với thiết bị này."}]},{"id":"cai-dat-pos-d68-3","topic":"Cài đặt POS D68","question":"Khi kết nối Máy quét mã vạch hoặc Màn hình hiển thị QR vào cổng USB của máy POS D68, bạn cần làm gì để thiết bị hoạt động?","answers":[{"id":"cai-dat-pos-d68-3-a","text":"Chỉ cần cắm vào cổng USB, hệ thống sẽ tự động nhận diện (Plug & Play) mà không cần cài đặt.","feedback":"Đây là đáp án ĐÚNG. Hệ thống Android trên POS D68 hỗ trợ cơ chế \"Cắm là chạy\" (Plug & Play) cho các thiết bị ngoại vi chuẩn USB này."},{"id":"cai-dat-pos-d68-3-b","text":"Phải tải Driver từ trang chủ KiotViet và cài đặt thủ công cho từng thiết bị.","feedback":"Đây là đáp án SAI. Việc cài đặt Driver thủ công là không cần thiết và gây phức tạp hóa quy trình, hệ thống đã tích hợp sẵn driver tương thích."},{"id":"cai-dat-pos-d68-3-c","text":"Phải khởi động lại máy POS, sau đó vào phần Cài đặt hệ thống để kích hoạt cổng USB.","feedback":"Đây là đáp án SAI. Các cổng USB hoạt động ngay lập tức khi cắm thiết bị vào mà không yêu cầu thao tác khởi động lại hay can thiệp hệ thống."}]},{"id":"cai-dat-pos-d68-4","topic":"Cài đặt POS D68","question":"Để màn hình phụ hiển thị giao diện tối ưu cho khách hàng (thông tin đơn hàng, mã QR thanh toán), bạn cần thực hiện thao tác nào trong phần Cài đặt?","answers":[{"id":"cai-dat-pos-d68-4-a","text":"Vào Cài đặt -> Hiển thị -> Bật tính năng \"Sử dụng màn hình phụ\".","feedback":"Đây là đáp án ĐÚNG. Trong ứng dụng KiotViet, tính năng này cần được BẬT (gạt sang xanh) để kích hoạt giao diện dành riêng cho khách hàng."},{"id":"cai-dat-pos-d68-4-b","text":"Vào Cài đặt -> Màn hình -> Chọn chế độ \"Mở rộng màn hình\" (Extended).","feedback":"Đây là đáp án SAI. Trên giao diện Android của máy POS không có tùy chọn \"Extended\" như trên Windows, việc này được xử lý trong cài đặt của ứng dụng KiotViet."},{"id":"cai-dat-pos-d68-4-c","text":"Nhấn nút cứng chuyển đổi màn hình ở cạnh bên của máy POS.","feedback":"Đây là đáp án SAI. Máy POS D68 không có nút cứng vật lý nào để chuyển đổi chế độ hiển thị màn hình."}]},{"id":"cai-dat-pos-d68-5","topic":"Cài đặt POS D68","question":"Nếu tính năng \"Sử dụng màn hình phụ\" trong cài đặt đang ở trạng thái TẮT, màn hình phụ sẽ hiển thị như thế nào?","answers":[{"id":"cai-dat-pos-d68-5-a","text":"Màn hình phụ sẽ phản chiếu (hiển thị y hệt) những gì đang diễn ra trên màn hình chính của thu ngân.","feedback":"Đây là đáp án ĐÚNG. Khi chưa bật chế độ tối ưu, màn hình phụ hoạt động ở chế độ mặc định là \"Mirroring\" (phản chiếu) màn hình chính."},{"id":"cai-dat-pos-d68-5-b","text":"Màn hình phụ sẽ tắt hoàn toàn (màn hình đen) để tiết kiệm điện năng.","feedback":"Đây là đáp án SAI. Màn hình phụ vẫn hoạt động và hiển thị hình ảnh (phản chiếu), không bị tắt đen."},{"id":"cai-dat-pos-d68-5-c","text":"Màn hình phụ chỉ hiển thị logo KiotViet cố định và không thay đổi theo thao tác bán hàng.","feedback":"Đây là đáp án SAI. Màn hình phụ sẽ phản chiếu thao tác của thu ngân chứ không chỉ hiện logo tĩnh."}]},{"id":"thiet-bi-ma-vach-1","topic":"Thiết bị Mã vạch","question":"Điểm khác biệt cơ bản nhất về khả năng đọc mã giữa máy quét đơn tia (XL-6500A) và máy quét đa tia (XL-2302) là gì?","answers":[{"id":"thiet-bi-ma-vach-1-a","text":"Máy quét đơn tia đọc được mã QR Code nhanh hơn máy đa tia.","feedback":"Đây là đáp án SAI. Máy đơn tia (Laser) về mặt công nghệ không thể đọc được mã trận 2D (QR Code)."},{"id":"thiet-bi-ma-vach-1-b","text":"Máy quét đơn tia chỉ đọc được mã vạch 1D (sọc ngang), còn máy đa tia đọc được cả mã 1D và mã QR Code (ma trận vuông).","feedback":"Đây là đáp án ĐÚNG. Công nghệ chụp ảnh của máy đa tia cho phép giải mã được các định dạng phức tạp như QR Code, trong khi máy Laser truyền thống chỉ quét được mã vạch tuyến tính."},{"id":"thiet-bi-ma-vach-1-c","text":"Cả hai loại máy đều chỉ đọc được mã vạch 1D, không đọc được mã QR Code.","feedback":"Đây là đáp án SAI. Máy đa tia XL-2302 được thiết kế chuyên dụng để đọc đa dạng các loại mã, bao gồm cả 2D."}]},{"id":"thiet-bi-ma-vach-2","topic":"Thiết bị Mã vạch","question":"Quy trình cài đặt máy quét mã vạch KiotViet trên máy tính hoặc máy POS tuân theo cơ chế nào?","answers":[{"id":"thiet-bi-ma-vach-2-a","text":"Phải tải và cài đặt Driver thủ công từ trang chủ nhà sản xuất trước khi cắm máy.","feedback":"Đây là đáp án SAI. Các dòng máy này sử dụng driver HID tiêu chuẩn có sẵn trong hệ điều hành, không cần cài đặt driver riêng."},{"id":"thiet-bi-ma-vach-2-b","text":"Cơ chế \"Cắm là chạy\" (Plug-and-Play): chỉ cần cắm dây USB vào cổng máy tính/POS là dùng được ngay.","feedback":"Đây là đáp án ĐÚNG. Thiết bị giao tiếp qua cổng USB dưới dạng bàn phím nhập liệu (HID), giúp hệ điều hành tự nhận diện ngay lập tức mà không cần cấu hình phức tạp."},{"id":"thiet-bi-ma-vach-2-c","text":"Phải gọi điện cho tổng đài KiotViet để xin mã kích hoạt thiết bị.","feedback":"Đây là đáp án SAI. Thiết bị phần cứng này không yêu cầu mã kích hoạt phần mềm để hoạt động."}]},{"id":"thiet-bi-ma-vach-3","topic":"Thiết bị Mã vạch","question":"Lợi ích vận hành vượt trội của máy quét đa tia (2D) so với máy quét đơn tia (1D) tại quầy thu ngân là gì?","answers":[{"id":"thiet-bi-ma-vach-3-a","text":"Khả năng quét đa hướng: chỉ cần lướt sản phẩm qua vùng quét mà không cần căn chỉnh tia sáng nằm ngang chính xác lên mã vạch.","feedback":"Đây là đáp án ĐÚNG. Công nghệ quét vùng (Area Imaging) cho phép bắt mã vạch ở bất kỳ góc độ nào, giúp tăng tốc độ thao tác đáng kể so với việc phải ngắm tia laser thẳng hàng."},{"id":"thiet-bi-ma-vach-3-b","text":"Máy sử dụng pin sạc nên không cần cắm dây điện lằng nhằng.","feedback":"Đây là đáp án SAI. Dòng XL-2302 là máy để bàn có dây (wired), lấy nguồn trực tiếp từ cổng USB."},{"id":"thiet-bi-ma-vach-3-c","text":"Máy có thể tự động in lại mã vạch mới nếu mã cũ bị mờ.","feedback":"Đây là đáp án SAI. Máy quét chỉ là thiết bị đầu vào (nhập liệu), không có chức năng in ấn (đầu ra)."}]},{"id":"thiet-bi-ma-vach-4","topic":"Thiết bị Mã vạch","question":"Đối với máy quét cầm tay XL-6500A, làm thế nào để kích hoạt chế độ \"quét tự động\" (rảnh tay) mà không cần bấm cò?","answers":[{"id":"thiet-bi-ma-vach-4-a","text":"Vào cài đặt Windows để chuyển đổi chế độ quét.","feedback":"Đây là đáp án SAI. Chế độ hoạt động được kiểm soát bởi phần cứng/firmware của máy, không phải cài đặt trong Windows."},{"id":"thiet-bi-ma-vach-4-b","text":"Dán băng dính để giữ chặt nút bấm (cò máy) liên tục.","feedback":"Đây là đáp án SAI. Đây là cách làm thủ công gây hại cho độ bền lò xo của nút bấm và không phải tính năng chuẩn."},{"id":"thiet-bi-ma-vach-4-c","text":"Lắp đặt máy lên chân đế đi kèm; cảm biến sẽ tự kích hoạt chế độ quét tự động.","feedback":"Đây là đáp án ĐÚNG. Chân đế đi kèm có tích hợp nam châm/cảm biến hoặc được thiết kế để máy chuyển sang chế độ \"Auto-sense\" khi được đặt cố định, giúp thu ngân rảnh tay thao tác hàng hóa."}]},{"id":"thiet-bi-ma-vach-5","topic":"Thiết bị Mã vạch","question":"Trên ứng dụng KiotViet Mobile, giải pháp nào giúp thay thế hoàn toàn máy quét vật lý để nhập hàng khi di chuyển trong kho?","answers":[{"id":"thiet-bi-ma-vach-5-a","text":"Sử dụng tính năng nhập liệu bằng giọng nói để đọc mã số.","feedback":"Đây là đáp án SAI. Hiện tại tính năng nhập mã hàng bằng giọng nói chưa phổ biến và độ chính xác không cao bằng quét hình ảnh."},{"id":"thiet-bi-ma-vach-5-b","text":"Kích hoạt Camera điện thoại thông qua biểu tượng mã vạch trên ứng dụng.","feedback":"Đây là đáp án ĐÚNG. Ứng dụng tận dụng camera độ phân giải cao của smartphone để quét và giải mã barcode, biến điện thoại thành máy quét di động tiện lợi."},{"id":"thiet-bi-ma-vach-5-c","text":"Kết nối chuột máy tính vào điện thoại để thao tác nhanh hơn.","feedback":"Đây là đáp án SAI. Chuột máy tính chỉ hỗ trợ điều hướng con trỏ, không có chức năng đọc/quét mã vạch quang học."}]}];
    const answerKey = {"dao-tao-kiotviet-mobile-1":"dao-tao-kiotviet-mobile-1-b","dao-tao-kiotviet-mobile-2":"dao-tao-kiotviet-mobile-2-b","dao-tao-kiotviet-mobile-3":"dao-tao-kiotviet-mobile-3-a","dao-tao-kiotviet-mobile-4":"dao-tao-kiotviet-mobile-4-c","dao-tao-kiotviet-mobile-5":"dao-tao-kiotviet-mobile-5-b","thiet-lap-kv804-1":"thiet-lap-kv804-1-b","thiet-lap-kv804-2":"thiet-lap-kv804-2-c","thiet-lap-kv804-3":"thiet-lap-kv804-3-c","thiet-lap-kv804-4":"thiet-lap-kv804-4-a","thiet-lap-kv804-5":"thiet-lap-kv804-5-b","cai-dat-pos-d68-1":"cai-dat-pos-d68-1-a","cai-dat-pos-d68-2":"cai-dat-pos-d68-2-a","cai-dat-pos-d68-3":"cai-dat-pos-d68-3-a","cai-dat-pos-d68-4":"cai-dat-pos-d68-4-a","cai-dat-pos-d68-5":"cai-dat-pos-d68-5-a","thiet-bi-ma-vach-1":"thiet-bi-ma-vach-1-b","thiet-bi-ma-vach-2":"thiet-bi-ma-vach-2-b","thiet-bi-ma-vach-3":"thiet-bi-ma-vach-3-a","thiet-bi-ma-vach-4":"thiet-bi-ma-vach-4-c","thiet-bi-ma-vach-5":"thiet-bi-ma-vach-5-b"};
    const feedbackMessages = { fail: `Cần cố gắng hơn!` };

    let currentQuestionIndex, score, questionsForGame, gameResults, selectedMode, userInfo;
    const elements = {};

    function initializeGame() {
        // Cache top-level containers first
        ['start-screen', 'mode-screen', 'quiz-container', 'result-area', 'review-screen', 'certificate-screen'].forEach(id => elements[id] = document.getElementById(id));
        elements.main = document.querySelector('main');

        // Build and cache elements for each screen
        buildStartScreen();
        buildModeScreen();
        buildQuizScreen();
        // Placeholder for other screens that might need building
        // buildResultScreen(); 
        // buildReviewScreen();
        // buildCertificateScreen();

        addEventListeners();
        resetGame();
    }
    
    function buildStartScreen() {
        elements['start-screen'].innerHTML = `
             <img src="https://logo.kiotviet.vn/KiotViet-Logo-Horizontal.svg" alt="KiotViet Logo" class="h-10 mx-auto mb-6">
             <h1 class="text-2xl sm:text-3xl font-bold text-slate-800 text-center mb-2">${document.title}</h1>
             <p class="text-slate-600 text-center mb-6">Vui lòng nhập thông tin để tiếp tục</p>
             <div class="space-y-4 mb-6">
                <div><label for="name-input" class="block text-sm font-medium text-slate-700 mb-1">Họ và tên</label><input type="text" id="name-input" class="w-full p-3 bg-white/80 border border-slate-300 rounded-lg focus:ring-2 focus:ring-kv-blue" placeholder="Nguyễn Văn A"></div>
                <div><label for="department-input" class="block text-sm font-medium text-slate-700 mb-1">Phòng ban</label><input type="text" id="department-input" class="w-full p-3 bg-white/80 border border-slate-300 rounded-lg" placeholder="TSHNI99"></div>
             </div>
             <p id="info-error-message" class="text-red-500 text-center mt-4 h-5"></p>
             <button id="continue-btn" class="w-full mt-4 btn btn-blue text-lg">Tiếp tục</button>`;
        // Cache elements for this screen immediately after creation
        elements.nameInput = document.getElementById('name-input');
        elements.departmentInput = document.getElementById('department-input');
        elements.infoErrorMessage = document.getElementById('info-error-message');
        elements.continueBtn = document.getElementById('continue-btn');
    }

    function buildModeScreen() {
        elements['mode-screen'].innerHTML = `
            <h2 class="text-2xl font-bold text-slate-800 text-center mb-6">Chọn chế độ chơi</h2>
            <div id="mode-selection-area" class="space-y-6"></div>
            <p id="mode-error-message" class="text-red-500 text-center mt-4 h-5"></p>
            <div class="flex flex-col sm:flex-row gap-4 mt-6">
                 <button id="back-btn" class="w-full sm:w-auto btn btn-slate">Quay lại</button>
                 <button id="start-btn" class="w-full sm:flex-1 btn btn-blue text-lg">Bắt đầu</button>
            </div>`;
        elements.modeSelectionArea = document.getElementById('mode-selection-area');
        elements.modeErrorMessage = document.getElementById('mode-error-message');
        elements.backBtn = document.getElementById('back-btn');
        elements.startBtn = document.getElementById('start-btn');
        setupModeSelection();
    }

    function buildQuizScreen() {
         elements['quiz-container'].innerHTML = `
            <div id="question-panel" class="w-full md:w-1/2 lg:w-3/5 bg-white p-6 sm:p-8 lg:p-12 flex flex-col h-screen overflow-y-auto">
                <div class="flex-grow">
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-sm font-semibold text-slate-600"><span id="question-count"></span></div>
                        <div id="score-display" class="text-lg font-bold text-kv-blue">Điểm: 0</div>
                    </div>
                    <div class="w-full bg-slate-200 rounded-full h-2.5 mb-6">
                        <div id="progress-bar" class="bg-kv-blue h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                    </div>
                    <p id="question-text" class="text-2xl font-semibold text-slate-800 mb-8"></p>
                    <div id="answers-container" class="space-y-4"></div>
                </div>
                <div class="mt-8 flex justify-between items-center">
                    <button id="exit-quiz-btn" class="text-slate-500 hover:text-red-600 font-semibold transition-colors"><i class="fas fa-times-circle mr-2"></i>Thoát</button>
                    <button id="next-btn" class="hidden btn btn-green text-lg">Câu tiếp theo</button>
                </div>
            </div>
            <div id="feedback-panel" class="w-full md:w-1/2 lg:w-2/5 bg-slate-100 p-8 flex flex-col justify-center items-center h-screen">
                <div id="feedback-placeholder" class="text-center text-slate-500">
                    <i class="far fa-lightbulb text-5xl mb-4"></i>
                    <p class="text-lg font-semibold">Chọn một đáp án để xem phản hồi</p>
                    <p>Phản hồi chi tiết sẽ xuất hiện ở đây.</p>
                </div>
                <div id="feedback-content" class="hidden w-full"></div>
            </div>`;
        elements.questionCount = document.getElementById('question-count');
        elements.scoreDisplay = document.getElementById('score-display');
        elements.progressBar = document.getElementById('progress-bar');
        elements.questionText = document.getElementById('question-text');
        elements.answersContainer = document.getElementById('answers-container');
        elements.exitQuizBtn = document.getElementById('exit-quiz-btn');
        elements.nextBtn = document.getElementById('next-btn');
        elements.feedbackPlaceholder = document.getElementById('feedback-placeholder');
        elements.feedbackContent = document.getElementById('feedback-content');
    }
    
    document.addEventListener('DOMContentLoaded', initializeGame);
    
    function setupModeSelection() {
        const topics = [...new Set(quizDataForClient.map(q => q.topic))].filter(Boolean);
        let randomHtml = `
            <div>
                <p class="font-bold text-lg text-center mb-4 text-slate-800">Chơi ngẫu nhiên</p>
                <div class="space-y-3">
                    <button class="mode-btn w-full text-left flex justify-between items-center p-4 bg-white border border-slate-300 text-slate-700 font-semibold rounded-lg" data-mode="random" data-count="5">5 câu <i class="fas fa-chevron-right text-slate-400"></i></button>
                    <button class="mode-btn w-full text-left flex justify-between items-center p-4 bg-white border border-slate-300 text-slate-700 font-semibold rounded-lg" data-mode="random" data-count="30">30 câu <i class="fas fa-chevron-right text-slate-400"></i></button>
                    <button class="mode-btn w-full text-left flex justify-between items-center p-4 bg-white border border-slate-300 text-slate-700 font-semibold rounded-lg" data-mode="random" data-count="all">Toàn bộ (${quizDataForClient.length} câu) <i class="fas fa-chevron-right text-slate-400"></i></button>
                </div>
            </div>`;
        
        let topicHtml = '';
        if (topics.length > 0) {
            topicHtml = `
                <div>
                    <p class="font-bold text-lg text-center mb-4 text-slate-800">Chơi theo chủ đề</p>
                    <div class="space-y-3">
                        ${topics.map(topic => `<button class="mode-btn w-full text-left flex justify-between items-center p-4 bg-white border border-slate-300 text-slate-700 font-semibold rounded-lg" data-mode="topic" data-topic="${topic}">${topic} (5 câu) <i class="fas fa-chevron-right text-slate-400"></i></button>`).join('')}
                    </div>
                </div>`;
        }
        elements.modeSelectionArea.innerHTML = randomHtml + topicHtml;
        
        document.querySelectorAll('.mode-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('mode-btn-selected'));
                e.currentTarget.classList.add('mode-btn-selected');
                selectedMode = e.currentTarget.dataset;
                elements.modeErrorMessage.innerText = '';
            });
        });
    }

    function addEventListeners() {
        elements.continueBtn.addEventListener('click', proceedToModeSelection);
        elements.backBtn.addEventListener('click', () => showScreen('start-screen'));
        elements.startBtn.addEventListener('click', startGame);
        elements.exitQuizBtn.addEventListener('click', () => { if (confirm('Bạn có chắc muốn thoát bài kiểm tra?')) resetGame(); });
        elements.nextBtn.addEventListener('click', nextQuestion);
        // Note: Event listeners for result/review/certificate screens should be added here
        // after their respective `build...` functions are created and called.
    }

    function showScreen(screenKey) {
        const mainScreens = ['start-screen', 'mode-screen', 'result-area', 'review-screen'];
        if (screenKey === 'quiz-container' || screenKey === 'certificate-screen') {
            elements.main.classList.add('hidden');
            elements.quizContainer.classList.toggle('hidden', screenKey !== 'quiz-container');
            elements.certificateScreen.classList.toggle('hidden', screenKey !== 'certificate-screen');
        } else {
            elements.main.classList.remove('hidden');
            elements.quizContainer.classList.add('hidden');
            elements.certificateScreen.classList.add('hidden');
            mainScreens.forEach(id => {
                if(elements[id]) elements[id].classList.toggle('hidden', id !== screenKey);
            });
        }
    }

    function proceedToModeSelection() {
        userInfo = { name: elements.nameInput.value.trim(), department: elements.departmentInput.value.trim() };
        if (!userInfo.name || !userInfo.department) {
            elements.infoErrorMessage.innerText = 'Vui lòng điền đầy đủ Họ và tên và Phòng ban.'; return;
        }
        elements.infoErrorMessage.innerText = '';
        showScreen('mode-screen');
    }

    function startGame() {
        if (!selectedMode || !selectedMode.mode) {
            elements.modeErrorMessage.innerText = 'Vui lòng chọn một chế độ chơi.'; return;
        }
        elements.modeErrorMessage.innerText = '';
        prepareQuestions();
        if (questionsForGame.length === 0) {
            elements.modeErrorMessage.innerText = 'Không có câu hỏi cho chế độ này.'; return;
        }
        showScreen('quiz-container');
        showQuestion();
    }
    
    function prepareQuestions() {
        let source = [...quizDataForClient];
        if (selectedMode.mode === 'topic') {
            source = source.filter(q => q.topic === selectedMode.topic);
            questionsForGame = shuffleArray(source).slice(0, 5);
        } else {
            source = shuffleArray(source);
            if (selectedMode.count && selectedMode.count !== 'all') {
                questionsForGame = source.slice(0, parseInt(selectedMode.count, 10));
            } else { questionsForGame = source; }
        }
    }

    function showQuestion() {
        elements.feedbackPlaceholder.classList.remove('hidden');
        elements.feedbackContent.classList.add('hidden');
        elements.nextBtn.classList.add('hidden');
        const q = questionsForGame[currentQuestionIndex];
        elements.questionCount.innerText = `Câu ${currentQuestionIndex + 1}/${questionsForGame.length}`;
        elements.progressBar.style.width = `${((currentQuestionIndex + 1) / questionsForGame.length) * 100}%`;
        elements.questionText.innerText = q.question;
        elements.answersContainer.innerHTML = '';
        shuffleArray([...q.answers]).forEach(ans => {
            const btn = document.createElement('button');
            btn.innerHTML = `<span>${ans.text}</span>`;
            btn.className = 'w-full text-left p-4 bg-white border-2 border-slate-300 rounded-lg hover:bg-blue-100 hover:border-kv-blue transition-all duration-200 flex items-center shadow-sm';
            btn.dataset.answerId = ans.id;
            btn.dataset.questionId = q.id;
            btn.onclick = selectAnswer;
            elements.answersContainer.appendChild(btn);
        });
    }

    function selectAnswer(e) {
        const selectedBtn = e.currentTarget;
        const { questionId, answerId } = selectedBtn.dataset;
        const isCorrect = answerId === answerKey[questionId];
        const currentQ = questionsForGame[currentQuestionIndex];
        const selectedAnswerObject = currentQ.answers.find(ans => ans.id === answerId);

        gameResults.push({ question: currentQ, selectedAnswerId: answerId, correctAnswerId: answerKey[questionId], isCorrect });
        
        if (isCorrect) {
            score++;
            elements.scoreDisplay.innerText = `Điểm: ${score}`;
            selectedBtn.classList.add('correct');
        } else {
            selectedBtn.classList.add('incorrect');
        }
        
        elements.feedbackPlaceholder.classList.add('hidden');
        const feedbackText = selectedAnswerObject.feedback;
        if (feedbackText && feedbackText.trim() !== '') {
            elements.feedbackContent.innerHTML = `
                <div class="text-center">
                    <i class="fas ${isCorrect ? 'fa-check-circle text-green-500' : 'fa-times-circle text-red-500'} text-5xl mb-4"></i>
                    <p class="text-xl font-semibold ${isCorrect ? 'text-green-700' : 'text-red-700'}">${isCorrect ? 'Chính xác!' : 'Chưa đúng!'}</p>
                    <p class="mt-2 text-slate-600">${feedbackText}</p>
                </div>`;
        } else {
            elements.feedbackContent.innerHTML = `
                <div class="text-center">
                    <i class="fas ${isCorrect ? 'fa-check-circle text-green-500' : 'fa-times-circle text-red-500'} text-5xl"></i>
                    <p class="mt-4 text-xl font-semibold ${isCorrect ? 'text-green-700' : 'text-red-700'}">${isCorrect ? 'Bạn đã trả lời đúng!' : 'Bạn đã trả lời sai.'}</p>
                </div>`;
        }
        elements.feedbackContent.classList.remove('hidden');

        Array.from(elements.answersContainer.children).forEach(button => button.onclick = null);
        elements.nextBtn.classList.remove('hidden');
    }

    function nextQuestion() {
        currentQuestionIndex++;
        (currentQuestionIndex < questionsForGame.length) ? showQuestion() : showScore();
    }
    
    function resetGame() {
        currentQuestionIndex = 0; score = 0;
        gameResults = []; questionsForGame = []; selectedMode = {}; userInfo = {};
        if (document.querySelectorAll('.mode-btn').length > 0) {
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('mode-btn-selected'));
        }
        if(elements.scoreDisplay) elements.scoreDisplay.innerText = `Điểm: 0`;
        if(elements.progressBar) elements.progressBar.style.width = '0%';
        showScreen('start-screen');
    }
    
    function showScore() {
        const percentage = (score / questionsForGame.length) * 100;
        const passed = percentage >= 80;
        if (passed) confetti({ particleCount: 150, spread: 90, origin: { y: 0.6 } });
        
        elements.resultArea.innerHTML = `
            <h2 class="text-3xl font-bold text-slate-800 mb-4">${passed ? "Xuất sắc!" : "Hoàn thành!"}</h2>
            <p class="text-xl text-slate-600 mb-6">Bạn đã trả lời đúng ${score}/${questionsForGame.length} câu (${percentage.toFixed(0)}%)</p>
            ${!passed ? `<div class="text-lg text-red-600 font-semibold mb-6">${feedbackMessages.fail}</div>` : ''}
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                 <button onclick="showReview()" class="btn btn-slate">Xem lại đáp án</button>
                 ${passed ? `<button onclick="showCertificate()" class="btn btn-green">Xem giấy khen</button>` : ''}
                 <button onclick="resetGame()" class="btn btn-blue">Chơi lại</button>
            </div>`;
        
        showScreen('result-area');
    }
    
    function showReview() {
        let reviewHtml = `<h2 class="text-2xl font-bold text-center mb-6">Xem lại câu trả lời</h2><div class="space-y-6 max-h-[70vh] overflow-y-auto pr-4">`;
        gameResults.forEach((result, index) => {
            reviewHtml += `<div class="p-4 rounded-lg border ${result.isCorrect ? 'border-green-300 bg-green-50' : 'border-red-300 bg-red-50'}">
                <p class="font-bold text-slate-800 mb-2">${index + 1}. ${result.question.question}</p>`;
            result.question.answers.forEach(answer => {
                let icon = '<i class="far fa-circle text-slate-400"></i>'; // Default
                if (answer.id === result.correctAnswerId) {
                    icon = '<i class="fas fa-check-circle text-green-500"></i>'; // Correct answer
                }
                if (answer.id === result.selectedAnswerId && !result.isCorrect) {
                     icon = '<i class="fas fa-times-circle text-red-500"></i>'; // Incorrectly selected
                }
                reviewHtml += `<p class="flex items-center gap-2 pl-2 ${answer.id === result.correctAnswerId ? 'font-semibold text-slate-700' : 'text-slate-600'}">${icon} ${answer.text}</p>`;
            });
            reviewHtml += `</div>`;
        });
        reviewHtml += `</div><div class="text-center mt-6"><button onclick="showScreen('result-area')" class="btn btn-blue">Quay lại kết quả</button></div>`;
        elements.reviewScreen.innerHTML = reviewHtml;
        showScreen('review-screen');
    }
    
    function showCertificate() {
        const today = new Date();
        const dateStr = `${today.getDate()} tháng ${today.getMonth() + 1}, ${today.getFullYear()}`;
        elements.certificateScreen.innerHTML = `
            <div class="relative w-full max-w-4xl bg-white p-4 rounded-lg shadow-2xl">
                <button onclick="showScreen('result-area')" class="absolute top-2 right-2 text-white bg-black/30 rounded-full w-8 h-8 flex items-center justify-center hover:bg-black/50 transition-colors z-10"><i class="fas fa-times"></i></button>
                <div class="border-4 border-yellow-500 p-8 text-center bg-slate-50 relative" style="background-image: url('https://www.transparenttextures.com/patterns/az-subtle.png');">
                     <img src="https://logo.kiotviet.vn/KiotViet-Logo-Horizontal.svg" alt="KiotViet Logo" class="h-10 mx-auto mb-6">
                    <h2 class="text-4xl font-bold text-yellow-800" style="font-family: 'Times New Roman', serif;">GIẤY CHỨNG NHẬN</h2>
                    <p class="text-lg mt-4">Chứng nhận</p>
                    <p class="text-3xl font-semibold text-kv-blue my-4">${userInfo.name}</p>
                    <p class="text-lg">thuộc phòng ban <strong>${userInfo.department}</strong></p>
                    <p class="text-lg mt-4">Đã hoàn thành xuất sắc bài kiểm tra <br><strong>${document.title}</strong></p>
                    <p class="text-2xl font-bold my-4">Đạt ${score}/${questionsForGame.length} điểm (${((score / questionsForGame.length) * 100).toFixed(0)}%)</p>
                    <p class="mt-8 text-slate-600"><em>Cấp ngày ${dateStr}</em></p>
                </div>
            </div>`;
        showScreen('certificate-screen');
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }
    </script></body></html>
